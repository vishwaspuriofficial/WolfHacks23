<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    
</head>
<body >
    <div class="wrapper" style="position: absolute; top: 0; left: 0;">
            <img id="map" src="map500/full.png" width="85%" height="auto">
            <button onclick="del()">Reset</button>
            <button id="get_path">Get path</button>

        </div>
        <canvas id="canvas" width="85%" height="auto" style="background-color: black;"> </canvas>
</body>
<script>
    // on button click
    document.getElementById("get_path").addEventListener("click", function(){
        let formData = new FormData();
        formData.append('starting_x', 0);
        formData.append('starting_y', 0);
        formData.append('ending_x', 49);
        formData.append('ending_y', 49);
        formData.append('map_name', 'map500');
        fetch("/api/get_path", {
          method: "POST",
          body: formData
        }).then(async res => {
            console.log("Request complete! response:", res);
            const data = await res.json();
            const path = data.path;
            draw_path(path);
        });
    });
    var count = 0
    map.onclick = function(e) {
        console.log(e.offsetX,e.offsetY)
        if (count==0) {
            const img = new Image(50, 50);
            img.id = "A";
            img.src = "A.png"; 
            img.style=`position: absolute; top:${e.offsetY-50}px; left:${e.offsetX-25}px`;
            document.body.appendChild(img);
        }
        else if (count==1) {
            const img = new Image(50, 50);
            img.src = "B.png"; 
            img.id = "B";
            img.style=`position: absolute; top:${e.offsetY-50}px; left:${e.offsetX-25}px`;
            document.body.appendChild(img);
        }
        count+=1
      };
    function del() {
        count=0;
        document.getElementById("A").remove();
        document.getElementById("B").remove();
    }

    function draw_path(array) {
        for (const pix of array){
            const img = new Image(10, 10);
            img.src = "path.png"; 
            img.id = "Path";
            img.style=`position: absolute; top:${pix[0]-5}px; left:${pix[1]-5}px`;
            document.body.appendChild(img);
        }
    }

    
    
</script>
</html>